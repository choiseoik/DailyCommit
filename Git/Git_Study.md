# git 에 대해 헷갈리는 개념들을 정리해 보자!

## 5.4 git fetch와 git pull: 원격저장소와 로컬 저장소의 간격 메꾸기

github등의 원격 저장소를 이용하다보면 다른 누군가가 커밋할 경우가 있을 것이다. 예를 들면 내가 로컬 저장소에서 작업한는 도중에 다른 협업자가 원격 저장소를 먼저 변경하는 것등이다.
이런경우 git은 push를 허용하지 않는다. 로컬 저장소의 커밋들을 원격 저장소와 맞춰야 한다. 이럴 때 하는 것이 fetch이다. fetch는 원격 저장소의 커밋들을 로컬 저장소로 가져온다. 사용자는 로컬로 가져온 커밋들을
자신이 여태까지 한 로컬 저장소의 작업과 적절히 병합해서 원격저장소에 제출해야 한다.
사실 원격 저장소의 커밋들을 로컬 저장소로 가져와 합하는 방법은 fetch와 pull두가지가 있다.

### 1. pull

 원격 저장소의 정보를 가져오면 자동으로 로컬 브랜치에 병합까지 수행하는 것이다. 하지만 pull을 이용해서 fetch와 merge 동시에 수행하는 것은 큰 단점이 있는데어떤 내용이 병합되면서 바뀌게 되었는 지를 알 수가 없다.
 물론 병합시 어느 파일이 몇줄 바귀고 어떤 충돌이 발생했는지 표시해주긴하지만 프로젝트의 세세한 부분이 어떻게 바뀌었는지는 전혀 파악할 수 없다. 때문에 pull을 이용한 commit 가져오기는 추천하지 않는다. 대신 fetch을 이용해서 가져오고 로컬에서 확인을 한다음 merge하는 것을 추천한다.

### 2. fetch + merge

원격저장소의 정보를 가져오는 활동이 fetch이다.

그런 다음 merge를 이용해서 원격 저장소의 master 브린치와 로컬 저장소의 master 브랜치를 병합한다.

## Git 고급

| 명령어                          | 설명                                                                         |
| ---------------------------- | -------------------------------------------------------------------------- |
| git tag                      | 커밋을 참조하기 쉽도록 알기 쉬운 이름을 붙인다                                                 |
| git commit --amend           | 같은 브랜치 상에 있는 최종 커밋을 취소하고 새로운 내용을 추가하거나 설명을 덧붙인 커밋을 할 수 있다.                 |
| git revert                   | 이전에 작성한 커밋을 지운다. 그런데 특정 커밋의 내용을 지우는 새로운 커밋을 만들어 지운 내역을 모든 사람이 알수 있게한다.     |
| git reset                    | 어떤 커밋을 버리고 이전의 특정 버전으로 다시 되돌릴때 사용 git revert와 비슷하나 다른점은 지운 커밋 내역을 남기지 않는다. |
| git checkout HEAD --filename | 아직 커밋하지 않은 변경 내역을 취소한다.                                                    |
| git rebase                   | git merge처럼 병합할 떄 사용한다. 하지만 브랜치가 많을 경우 브랜치 이력을 확인하면서 병합한다.                 |
| git rebase -i                | 서로 다른 두개의 커밋 내역을 합친다.                                                      |
<br><br>

---

## 10.1 git tag: 특정 커밋을 참조하는 이름 붙이기

> ### 처음 봤을 때 왜쓰지 언제쓰지 했는데 버전관리시에 버전tag(1.0)를 붙여준다면 가독성이 훨씬 높아질듯 하다 git show 1.0하면 1.0 tag가 붙은 커밋들을 보여준다.

```git

git tag 태그이름 // 가장 최근 커밋에 태그를 붙일때

git log --decorate -1 // 태그가 붙여졌는지 확인 로그와 같이 볼수있음

git tag -l

git show-ref --tags // 태그와 커밋 SHA-1체크섬 값을 같이 볼수있음

git tag 1.0 4dd7 // 4dd7이란 체크섬을 가진 커밋한테 1.0이란 태그를 붙여줘!

git show
```

## 10.2 git commit --amend: 마지막 커밋 수정하기

`git commit --amend` 마지막 커밋 수정하는 명령어

위 명령을 실행하면 마지막 커밋과 커밋하지 않은 상태에 있는 변경 내역이 서로 합쳐진 새 커밋을 만든다.

만약 아무것도 변경하지 않으면 커밋 메세지만 변경할 수 있다. vim창을 통해 수정

## 10.3 git revert

`git revert 커밋SHA-1 체크섬값`

이미 공개된 커밋 내역을 안전하게 되돌리는 방법이다.

다시 뒤돌아 커밋을 하는것 마찬가지로 vim창에서 수정가능하고

**뒤로 돌린 커밋내역이 기록에 남는다!**

완료되면 에디터에 쓴 변경부분이 사라진다.

실제로는 되돌리는 것이 아니라 되돌리는 것 같은 효과이다.

**거꾸로 적용하는 새 커밋을 만든 것!**

## 10.4 git reset: 이전 작업 결과를 저장한 상태로 되돌리기

git revert와 비슷하나 다른점은 commit 기록이 남지 않는다.

>git reset 명령 모드

| 모드    | 의미                               | HEAD 위치 | 인덱스   | 저장 디렉터리 |
| ----- | -------------------------------- | ------- | ----- | ------- |
| hard  | 완전히 되돌림                          | 변경      | 변경    | 변경      |
| mixed | 인덱스의 상태를 되돌림 모드를 지정하지 않았을 때의 기본값 | 변경      | 변경    | 변경안함    |
| soft  | 커밋만 되돌림                          | 변경      | 변경 안함 | 변경 안함   |

>git reset 명령의 옵션

| 옵션        | 설명                                                                                   |
| --------- | ------------------------------------------------------------------------------------ |
| ^ 혹은 ~    | ~은 커밋 내역 하나를 의미한다. 표시한 수만큼 커밋을 되돌린다. 하나면 최종 커밋 내역일 것이고 두개면 최종 커밋 내역과 바로 전 커밋 내역이 된다. |
| ORIG_HEAD | git reset 명령을 실행 했을때 지운 커밋 내역을 보관한다. 해당 명령을 통해 git reset명령으로 지운 커밋을 되돌릴 수 있다.        |

`git reset --soft HEAD~~~` // ~의 갯수가 3개이므로 3개 커밋만 되돌림

## 10.5 git checkout HEAD -- filename: 특정 파일을 최종 커밋 시점으로 되돌리기

## 10.6 git rebase : 브랜치 이력을 확인하면서 병합하기

## 10.7 git rebase -i : 커밋 내역 합하기

